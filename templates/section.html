{% extends "_base.html" %}
{% import "macros/post_macros.html" as post_macros %}
{% import "macros/index_macros.html" as index_macros %}

{% block content %}
  <!-- Include just the header from the parent -->
  {{ index_macros::header(config=config) }}

  <main>
    <!-- 1. First show the section title -->
    <header><h1>{{ section.title }}</h1></header>
    
    <!-- 2. Then show the section content (_index.md content) -->
    {% if section.content %}
      <div class="section-intro">{{ section.content | safe }}</div>
    {% endif %}
    
    <!-- 3. Finally show the individual projects -->
    {% if paginator %}
      {% for page in paginator.pages %}
        {{ post_macros::page_in_list(page=page) }}
      {% endfor %}
    {% else %}
      {% for page in section.pages %}
        {{ post_macros::page_in_list(page=page) }}
      {% endfor %}
    {% endif %}
    
    <!-- 4. Show pagination if needed -->
    {% if paginator %}
      {{ index_macros::nav(paginator=paginator) }}
    {% endif %}
  </main>
{% endblock content %}
